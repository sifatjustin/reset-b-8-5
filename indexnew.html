<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Test</title>
        <link href="https://cdn.jsdelivr.net/npm/daisyui@4.10.1/dist/full.min.css" rel="stylesheet" type="text/css" />
        <script src="https://cdn.tailwindcss.com"></script>
    </head>
</head>

<body>

    <section
        class="bg-[#F7F8F8] container max-w-6xl px-4 lg:px-10 mx-auto border-t-2 border-solid border-green-500 lg:rounded-t-[60px] rounded-xl">
        <div>
            <!-- only text -->
            <div class="text-center my-5 lg:mt-[100px] lg:mb-[50px]">
                <h2 class="text-[#030712] text-2xl lg:text-[38px] mb-3 lg:mb-6 font-bold">P.H Paribahan</h2>
                <p class="text-[#03071299] text-xl lg:text-[18px] font-normal">Yes, you can run unit tests and view the
                    results directly <br>within the app. The integrated testing features allow for a streamlined .</p>
            </div>

            <!-- Route and remaining ticket -->
            <div class="bg-[#FFFFFF] my-5 lg:my-[60px] flex items-center flex-col lg:flex-row rounded-3xl">
                <!-- first div with main info -->
                <div class="p-4">
                    <div class="flex  items-center justify-between ">
                        <div class="flex lg:gap-5 gap-2 items-center p-4">
                            <img src="./images/bus-logo.png" class="w-10 " alt="Bus- logo">
                            <div>
                                <h3 class="text-[#030712] font-bold text-xl lg:text-3xl">Greenline Paribahan</h3>
                                <p class="text-[#03071299] font-normal text-xs lg:text-xl">Coach-009-WEB ! AC_Business
                                </p>
                            </div>
                        </div>
                        <div class="flex gap-2 items-center p-2 lg:p-4 bg-[#1DD10026] rounded-[10px]">
                            <img src="./images/seat-green.png" alt="">
                            <p><span id="remainingSeat">40 </span>Seats left</p>
                        </div>
                    </div>
                    <div class="bg-[#F7F8F8] p-4 lg:p-7 rounded-2xl">
                        <div class="flex justify-between items-center">
                            <p class="text-[#03071299] text-[18px] font-semibold">Route</p>
                            <h4 class="text-[#030712] text-[18px] font-bold">Dhaka - Sylhet</h4>
                        </div>
                        <hr class="my-3 border border-dashed border-[#03071233]">
                        <div class="flex justify-between items-center">
                            <p class="text-[#03071299] text-[18px] font-semibold">Departure Time</p>
                            <h4 class="text-[#030712] text-[18px] font-bold">9:00 PM</h4>
                        </div>
                        <hr class="my-3 border border-dashed border-[#03071233]">
                        <div class="flex gap-3 justify-between lg:items-center">
                            <h4
                                class="text-[#030712CC] font-medium p-1 lg:text-[16px] text-xs bg-[#0307120D] lg:p-3 rounded-md">
                                Boarding
                                Point - Laxmipur</h4>
                            <h4
                                class="text-[#030712CC] font-medium p-1 lg:text-[16px] text-xs bg-[#0307120D] lg:p-3 rounded-md">
                                Dropping
                                Point - Bogura</h4>
                            <h4
                                class="text-[#030712CC] font-medium p-1 lg:text-[16px] text-xs bg-[#0307120D] lg:p-3 rounded-md">
                                Est. Time
                                - 11 Hour</h4>
                        </div>
                    </div>
                </div>
                <!-- 2nd div with a divider -->
                <div>
                    <img src="./images/info-devider.png" class="hidden lg:block" alt="">
                </div>
                <!-- third div with ticket price -->
                <div>
                    <div class="flex lg:ml-[100px] flex-col gap-2 justify-center items-center">
                        <img class="w-8 lg:w-[40px] lg:h-[40px] h-8 text-center" src="./images/fare.png" alt="">
                        <h2 class="text-[#030712] font-bold text-3xl">550 Taka</h2>
                        <p class="text-[#03071299] font-medium text-xl">per seat</p>
                    </div>
                </div>
            </div>


            <!-- SEAT AND PRICE main mark -->

            <!-- main div  -->
            <div
                class="my-5  bg-[#FFFFFF] rounded-3xl p-3 lg:p-10 gap-5 lg:grid justify-center grid-cols-1 lg:grid-cols-6 ">
                <!-- div - one - starts  -->
                <div class="lg:col-span-4 lg:w-[700px]">
                    <div class="">
                        <h3>Select Your Seat</h3>
                        <hr class="my-3 border border-dashed border-[#03071233]">
                        <div class="flex gap-2 justify-between">
                            <div class="flex gap-2">
                                <img src="./images/seat-gray.png" alt="">
                                <p>Available</p>
                            </div>
                            <div class="flex gap-2">
                                <img src="./images/seat-green-filled.png" alt="">
                                <p>Available</p>
                            </div>
                        </div>
                        <hr class="my-3 border border-dashed border-[#03071233]">
                    </div>
                    <div>
                        <div class="flex justify-end">
                            <img class="bg-slate-200 px-5 rounded-lg py-3" src="./images/tabler-icon-steering-wheel.png"
                                alt="">
                        </div>
                        <!-- seat -->
                        <div class="flex lg:gap-20 flex-col lg:flex-row justify-center">
                            <!-- seat a1-a2 -->
                            <div>
                                <div class="flex gap-4 my-3 items-center">
                                    <div>
                                        <p class="text-[#03071280] P-1 ">A</p>
                                    </div>
                                    <div class="flex gap-4">
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">A1</kbd>
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">A2</kbd>
                                    </div>
                                </div>
                                <div class="flex gap-4 my-3 items-center">
                                    <div>
                                        <p class="text-[#03071280] P-1">B</p>
                                    </div>

                                    <div class="flex gap-4">
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">B1</kbd>
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">B2</kbd>
                                    </div>
                                </div>
                                <div class="flex gap-4 my-3 items-center">
                                    <div>
                                        <p class="text-[#03071280] P-1">C</p>
                                    </div>
                                    <div class="flex gap-4">
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">C1</kbd>
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">C2</kbd>
                                    </div>
                                </div>
                                <div class="flex gap-4 my-3 items-center">
                                    <div>
                                        <p class="text-[#03071280] P-1">D</p>
                                    </div>
                                    <div class="flex gap-4">
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">D1</kbd>
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">D2</kbd>
                                    </div>
                                </div>
                                <div class="flex gap-4 my-3 items-center">
                                    <div>
                                        <p class="text-[#03071280] P-1">E</p>
                                    </div>
                                    <div class="flex gap-4">
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">E1</kbd>
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">E2</kbd>
                                    </div>
                                </div>
                                <div class="flex gap-4 my-3 items-center">
                                    <div>
                                        <p class="text-[#03071280] P-1">F</p>
                                    </div>
                                    <div class="flex gap-4">
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">F1</kbd>
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">F2</kbd>
                                    </div>
                                </div>
                                <div class="flex gap-4 my-3 items-center">
                                    <div>
                                        <p class="text-[#03071280] P-1">G</p>
                                    </div>
                                    <div class="flex gap-4">
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">G1</kbd>
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">G2</kbd>
                                    </div>
                                </div>
                                <div class="flex gap-4 my-3 items-center">
                                    <div>
                                        <p class="text-[#03071280] P-1">H</p>
                                    </div>
                                    <div class="flex gap-4">
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">H1</kbd>
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">H2</kbd>
                                    </div>
                                </div>
                                <div class="flex gap-4 my-3 items-center">
                                    <div>
                                        <p class="text-[#03071280] P-1">I</p>
                                    </div>
                                    <div class="flex gap-4">
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">I1</kbd>
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">I2</kbd>
                                    </div>
                                </div>
                                <div class="flex gap-4 my-3 items-center">
                                    <div>
                                        <p class="text-[#03071280] P-1">J</p>
                                    </div>
                                    <div class="flex gap-4">
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">J1</kbd>
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">J2</kbd>
                                    </div>
                                </div>


                            </div>

                            <!-- seat a3-a4 -->
                            <div>
                                <div class="flex gap-4 my-3 items-center">

                                    <div class="flex gap-4">
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">A3</kbd>
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">A4</kbd>
                                    </div>
                                </div>
                                <div class="flex gap-4 my-3 items-center">


                                    <div class="flex gap-4">
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">B3</kbd>
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">B4</kbd>
                                    </div>
                                </div>
                                <div class="flex gap-4 my-3 items-center">

                                    <div class="flex gap-4">
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">C3</kbd>
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">C4</kbd>
                                    </div>
                                </div>
                                <div class="flex gap-4 my-3 items-center">

                                    <div class="flex gap-4">
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">D3</kbd>
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">D4</kbd>
                                    </div>
                                </div>
                                <div class="flex gap-4 my-3 items-center">

                                    <div class="flex gap-4">
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">E3</kbd>
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">E4</kbd>
                                    </div>
                                </div>
                                <div class="flex gap-4 my-3 items-center">

                                    <div class="flex gap-4">
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">F3</kbd>
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">F4</kbd>
                                    </div>
                                </div>
                                <div class="flex gap-4 my-3 items-center">

                                    <div class="flex gap-4">
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">G3</kbd>
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">G4</kbd>
                                    </div>
                                </div>
                                <div class="flex gap-4 my-3 items-center">

                                    <div class="flex gap-4">
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">H3</kbd>
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">H4</kbd>
                                    </div>
                                </div>
                                <div class="flex gap-4 my-3 items-center">

                                    <div class="flex gap-4">
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">I3</kbd>
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">I4</kbd>
                                    </div>
                                </div>
                                <div class="flex gap-4 my-3 items-center">
                                    <div class="flex gap-4">
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">J3</kbd>
                                        <kbd class="kbd myButton px-5 rounded-[10px] text-[#03071280]">J4</kbd>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
                <!-- div - one - ends  -->


                <!-- div - two - starts  -->
                <div class=" col-span-2">
                    <!-- seat name and price -->
                    <div>
                        <div>
                            <h3>Select Your Seat</h3>
                            <hr class="my-3 border border-dashed border-[#03071233]">
                        </div>
                        <!-- ticket name and price -->
                        <div class="p-4 bg-[#F7F8F8] rounded-lg">
                            <div class="flex justify-between ">
                                <h3>Seat <sup
                                        class="text-[14px] text-[#FFFFFF] font-extrabold  bg-[#1DD100] rounded-[5px] "
                                        id="seatSelected"></sup></h3>
                                <h3>Class</h3>
                                <h3>Price</h3>
                            </div>
                            <hr class="my-3 border border-dashed border-[#03071233]">
                            <div class="" id="seatInfoContainer">

                            </div>
                            <div class="flex justify-between">
                                <h3>Total Price</h3>
                                <p id="totalPrice">0</p>
                            </div>
                            <div id="discountPrice"></div>
                            <!-- coupon part -->
                            <div id="couponDisplay"
                                class="flex justify-between px-3 py-2 rounded-2xl mt-3 bg-[#FFFFFF]">
                                <input placeholder="Have any coupon?" id="couponCode" type="text">
                                <button id="applyCouponBtn"
                                    class="bg-[#1DD100] px-4 btn py-2 text-[#FFFFFF] font-semibold rounded-xl opacity-50 ">Apply</button>
                            </div>
                            <div class="flex justify-between mt-3">
                                <h3>Grand Total</h3>
                                <p id="grandTotalPrice">0</p>
                            </div>
                        </div>
                    </div>

                    <!-- passengers info -->
                    <div>
                        <div class="py-3">
                            <h4 class="text-[#030712] text-[18px] font-semibold">Passenger Name*</h4>
                            <input placeholder="Enter your name" class="p-3 rounded-[12px] mt-2 border w-full"
                                type="text">
                        </div>
                        <div class="py-3">
                            <h4 class="text-[#030712] text-[18px] font-semibold">Phone Number*</h4>
                            <input id="phoneNumberInput" placeholder="Enter your phone number"
                                class="p-3 rounded-[12px] mt-2 border w-full" type="number">
                        </div>
                        <div class="py-3">
                            <h4 class="text-[#030712] text-[18px] font-semibold">Email ID</h4>
                            <input placeholder="Enter your email id" class="p-3 rounded-[12px] mt-2 border w-full"
                                type="email">
                        </div>
                    </div>

                    <!-- Next button -->
                    <!-- Open the modal using ID.showModal() method -->
                    <div>
                        <button id="nextButton"
                            class="py-3 text-[#ffffff] font-extrabold text-xl rounded-2xl mt-3 w-full bg-[#1DD100]"
                            onclick="my_modal_1.showModal()" disabled>Next</button>
                        <dialog id="my_modal_1" class=" w-1/2  mx-auto">
                            <div class="flex justify-center items-center flex-col p-8 rounded-2xl">
                                <img src="./images/success.png" alt="">
                                <p class="py-4 text-[#27AE60] font-semibold text-2xl my-5">SUCCESS</p>
                                <p class="text-center font-medium text-[#4A4A4A] text-xl">Thank you for Booking Our Bus
                                    Seats.
                                    We are working hard to find the best service and deals for you.
                                </p>
                                <p class="text-center font-light text-[#4A4A4A] text-xl p-4"> Shortly you will find a
                                    confirmation in your email.</p>
                                <div class="modal-action">
                                    <form method="dialog">
                                        <!-- if there is a button in form, it will close the modal -->
                                        <button
                                            class="bg-[#27AE60] py-3 text-[#FFFFFF] font-semibold text-[20px] px-20 rounded-[32px]">Continue</button>
                                    </form>
                                </div>
                            </div>
                        </dialog>
                    </div>

                    <div class="flex justify-around mt-3 ">
                        <p class="text-[#03071299] font-normal text-[16px] underline">Terms and Conditions</p>
                        <p class="text-[#03071299] font-normal text-[16px] underline">Cancellation Policy</p>
                    </div>
                </div>

                <!-- div - two - ends  -->



            </div>

        </div>
    </section>





    <script>
        const phoneNumberInput = document.getElementById('phoneNumberInput');
        const nextButton = document.getElementById('nextButton');

        phoneNumberInput.addEventListener('input', function () {
            if (phoneNumberInput.value.trim() === '' || selectedButtonsCount === 0) {
                nextButton.disabled = true;
            } else {
                nextButton.disabled = false;
            }
        });

        console.log('connected')
        const buttons = document.querySelectorAll(".myButton");
        // const totalSection = document.getElementById("totalSection");
        const anotherDiv = document.getElementById("remainingSeat");
        const anotherDiv2 = document.getElementById("seatSelected");
        const seatName = document.getElementById("seatName");
        const seatType = document.getElementById("seatType");
        const seatPrice = document.getElementById("seatPrice");
        const seatInfoContainer = document.getElementById("seatInfoContainer");
        const totalPriceElement = document.getElementById("totalPrice");
        const grandTotalPriceElement = document.getElementById("grandTotalPrice");
        const applyCouponBtn = document.getElementById("applyCouponBtn");
        const couponCodeInput = document.getElementById("couponCode");
        const couponDisplay = document.getElementById("couponDisplay")

        let totalValue = 0;
        let anotherDivValue = 40;
        let anotherDivValue2 = 0;
        let selectedButtonsCount = 0;
        let selectedSeats = [];
        let couponApplied = false;

        buttons.forEach((button) => {
            button.addEventListener("click", function () {
                const buttonName = this.textContent;

                if (this.classList.contains("bg-[#1DD100]")) {
                    // Remove seat from selected seats
                    selectedSeats = selectedSeats.filter((seat) => seat.name !== buttonName);
                    this.classList.remove("bg-[#1DD100]");
                    totalValue -= 550;
                    selectedButtonsCount--;
                } else if (totalValue < 2000 && selectedButtonsCount < 4) {
                    // Check if less than 4 seats are already selected
                    // Add seat to selected seats
                    selectedSeats.push({
                        name: buttonName,
                        type: "Economy",
                        price: 550, // Assuming each seat price is 550
                    });
                    this.classList.add("bg-[#1DD100]");
                    totalValue += 550;
                    selectedButtonsCount++;
                } else {
                    alert("You can only select up to 4 seats.");
                }

                updateSeatInfo();
                updateAnotherDiv();
                updateAnotherDiv2();
            });
        });

        applyCouponBtn.addEventListener("click", function () {
            const couponCode = couponCodeInput.value;

            if (couponCode === "couple20" && selectedButtonsCount === 4 && !couponApplied) {
                applyCoupon(0.2); // 20% discount
                couponApplied = true;
            } else if (couponCode === "new15" && selectedButtonsCount === 4 && !couponApplied) {
                applyCoupon(0.15); // 15% discount
                couponApplied = true;
            } else {
                alert("Invalid coupon code or conditions not met.");
            }
        });



        function updateAnotherDiv() {
            anotherDivValue = 40 - selectedButtonsCount;
            anotherDiv.textContent = anotherDivValue;
        }

        function updateAnotherDiv2() {
            anotherDivValue2 = selectedButtonsCount;
            anotherDiv2.textContent = anotherDivValue2;
        }

        function updateSeatInfo() {
            // Clear previous seat info
            seatInfoContainer.innerHTML = "";

            // Append seat info for each selected seat
            selectedSeats.forEach((seat) => {
                const seatDiv = document.createElement("div");
                seatDiv.classList = "flex justify-between";
                seatDiv.innerHTML = `
  <p>${seat.name}</p>
  <p>${seat.type}</p>
  <p>${seat.price}</p>
`;
                seatInfoContainer.appendChild(seatDiv);
            });

            // Calculate total price
            const totalPrice = selectedSeats.reduce((acc, seat) => acc + seat.price, 0);
            totalPriceElement.textContent = totalPrice;

            // Calculate grand total price
            grandTotalPriceElement.textContent = totalPrice;
        }
        // Function to update the total price without discounts
        function updateTotalPrice() {
            const totalPrice = selectedSeats.reduce((acc, seat) => acc + seat.price, 0);
            totalPriceElement.textContent = totalPrice; // Update the total price element
        }
        updateTotalPrice();
        // Function to apply coupon discounts
        function applyCoupon(discountRate) {
            const totalPrice = selectedSeats.reduce((acc, seat) => acc + seat.price, 0);
            const discountedPrice = totalPrice * (1 - discountRate);

            totalPriceElement.textContent = discountedPrice; // Update the total price element with discounted price
            grandTotalPriceElement.textContent = discountedPrice; // Also update the grand total price
        }

        // Call updateTotalPrice initially to set the initial total price

        function applyCoupon(discountRate) {


            const totalPrice = selectedSeats.reduce((acc, seat) => acc + seat.price, 0);
            const discountedPrice = totalPrice * (1 - discountRate);

            totalPriceElement.textContent = totalPrice;
            grandTotalPriceElement.textContent = discountedPrice;

            // Check if the correct coupon is applied
            if ((couponCodeInput.value === "couple20" && discountRate === 0.2) ||
                (couponCodeInput.value === "new15" && discountRate === 0.15)) {
                console.log("Correct coupon applied.");
                couponCodeInput.classList.add("hidden"); // Add the 'hidden' class to hide the coupon code input
                couponDisplay.classList.add("hidden"); // Add the 'hidden' class to hide the coupon code input

                // Calculate the discounted price
                const totalPrice = selectedSeats.reduce((acc, seat) => acc + seat.price, 0);
                const discountedPrice = totalPrice * (1 - discountRate);

                // Create a paragraph element for displaying the discounted amount
                const discountParagraph = document.createElement("p");
                discountParagraph.textContent = `Your total discount is ${totalPrice - discountedPrice} tk`;

                // Get the div with the id "discountPrice"
                const discountPriceDiv = document.getElementById("discountPrice");

                // Append the discount paragraph inside the "discountPrice" div
                discountPriceDiv.appendChild(discountParagraph);
            } else {
                console.log("Invalid coupon or discount rate.");
            }




        }




    </script>


</body>

</html>